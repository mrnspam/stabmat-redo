{% assign items = site.data.navigation.secondary | default: [] %}
{% assign current_url = page.url | default: '/' %}
<div class="wrap">
  <ul id="menu-hoofdmenu-1" class="menu genesis-nav-menu menu-secondary responsive-menu">
    {% for item in items %}
      {% assign item_url = item.url | default: '#' %}
      {% assign item_classes = 'menu-item' %}
      {% assign is_active = false %}
      {% if current_url == item_url %}
        {% assign is_active = true %}
      {% elsif current_url == item_url | append: 'index.html' %}
        {% assign is_active = true %}
      {% elsif page.collection == 'posts' and item.key == 'blog' %}
        {% assign is_active = true %}
      {% elsif item.children %}
        {% for child in item.children %}
          {% assign child_url = child.url | default: '' %}
          {% if child_url != '' and current_url != '/' and current_url contains child_url %}
            {% assign is_active = true %}
          {% endif %}
        {% endfor %}
      {% endif %}
      {% if item.children %}
        {% assign item_classes = item_classes | append: ' menu-item-has-children' %}
      {% endif %}
      {% if is_active %}
        {% assign item_classes = item_classes | append: ' current-menu-item' %}
      {% endif %}
      <li class="{{ item_classes | strip }}">
        <a href="{{ item_url | relative_url }}"{% if is_active %} aria-current="page"{% endif %}>{{ item.title }}</a>
        {% if item.children %}
          <ul class="sub-menu">
            {% for child in item.children %}
              <li class="menu-item">
                <a href="{{ child.url | relative_url }}">{{ child.title }}</a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</div>
